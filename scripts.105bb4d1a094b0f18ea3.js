function addData(e){return fetch("https://monitoramento-backend.herokuapp.com/anotacao",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({titulo:e.titulo,message:e.message,color:e.color})})}function getDataAndSend(){let e;const t=indexedDB.open("db-motin");t.onerror=e=>{console.log("Please allow my web app to use IndexedDB \ud83d\ude03>>>\ud83d\udc7b")},t.onsuccess=t=>{e=t.target.result,getData(e)}}function getData(e){console.log("getData-10"),console.log("Event"),e.transaction(["notas"]).objectStore("notas").openCursor().onsuccess=function(t){var o=t.target.result;if(o){console.log("cursor:"),console.log(o.value),console.log(o.key);let t={key:o.key,titulo:o.value.titulo,message:o.value.message,color:o.value.color};addData(t).then(o=>{const n=e.transaction(["notas"],"readwrite").objectStore("notas").delete(t.key||0);n.onerror=e=>{console.error(e)},n.onsuccess=e=>{console.log("delete sucess: "+t.key)},Promise.resolve()}).catch(()=>Promise.reject()),o.continue()}}}self.addEventListener("fetch",(function(e){return e.respondWith(caches.match(e.request).then((function(t){let o=e.request.clone();return fetch(o).then().catch(t=>{if("GET"===e.request.method&&e.request.headers.get("accept").includes("text/html"))return caches.match("offline-page.html")})})))})),self.addEventListener("sync",e=>{"post-data"===e.tag&&e.waitUntil(getDataAndSend())});